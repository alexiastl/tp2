set SERVEROUTPUT ON

drop table TP2_PLATEFORME cascade constraints;
drop table TP2_HORAIRE_PLATEFORME cascade constraints;
drop table TP2_CHAINE cascade constraints;
drop table TP2_HORAIRE_CHAINE cascade constraints;
drop table TP2_CINEMA cascade constraints;
drop table TP2_HORAIRE_CINEMA cascade constraints;
drop table TP2_BILLET_CINEMA cascade constraints;
drop table TP2_OEUVRE cascade constraints;
drop table TP2_REALISATEUR_OEUVRE cascade constraints;
drop table TP2_REALISATEUR cascade constraints;
drop table TP2_ROLE_OEUVRE cascade constraints;
drop table TP2_ACTEUR cascade constraints;
drop table TP2_UTILISATEUR cascade constraints;
drop table TP2_CRITIQUE cascade constraints;
drop sequence NO_CRITIQUE_SEQ;

create table TP2_PLATEFORME(
    NOM_PLATEFORME varchar2(40) not null,
    COMPAGNIE_PLA varchar2(40) not null,
    URL_PLA varchar(40) not null,
    constraint PK_PLATEFORME primary key (NOM_PLATEFORME));
    
create table TP2_HORAIRE_PLATEFORME(
    NOM_PLATEFORME varchar2(40) not null,
    NO_OEUVRE number(6,0) not null,
    DATE_HEURE_HORP date not null,
    constraint PK_HORAIRE_PLATEFORME primary key (NOM_PLATEFORME, NO_OEUVRE, DATE_HEURE_HORP));
    
create table TP2_CHAINE(
    NOM_CHAINE varchar2(40) not null,
    COMPAGNIE_CHA varchar2(40) not null,
    URL_CHA varchar(40) not null,
    constraint PK_CHAINE primary key (NOM_CHAINE));
    
create table TP2_HORAIRE_CHAINE(
    NOM_CHAINE varchar2(40) not null,
    NO_OEUVRE number(6,0) not null,
    DATE_HEURE_HORCH date not null,
    constraint PK_HORAIRE_CHAINE primary key (NOM_CHAINE, NO_OEUVRE, DATE_HEURE_HORCH));
    
create table TP2_CINEMA(
    NOM_CINEMA varchar2(40) not null,
    COMPAGNIE_CIN varchar2(40) not null,
    ADR_CIN varchar(50) not null,
    VILLE_CIN varchar(40) not null,
    TELEPHONE_CIN char(13) not null,
    constraint PK_CINEMA primary key (NOM_CINEMA));
    
create table TP2_HORAIRE_CINEMA(
    NOM_CINEMA varchar2(40) not null,
    NO_OEUVRE number(6,0) not null,
    DATE_DEBUT_HORC date not null,
    HEURE_HORC date not null,
    DATE_FIN_HORC date not null,
    constraint PK_HORAIRE_CINEMA primary key (NOM_CINEMA, NO_OEUVRE, DATE_DEBUT_HORC, HEURE_HORC));

create table TP2_BILLET_CINEMA(
    NOM_CINEMA varchar2(40) not null,
    CATEGORIE_BIL varchar2(40) not null,
    PERIODE_JOURNEE_BIL varchar(40) not null,
    MNT_PRIX_BIL number(4,2) default 12.99 not null,
    constraint PK_BILLET_CINEMA primary key (NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL));
    

create table TP2_OEUVRE (
    NO_OEUVRE number(6,0) generated by default as identity(start with 1 increment by 1) not null,
    TITRE_OEU varchar2(50) not null,
    ANNEE_OEU number(4,0) not null,
    GENRE_OEU varchar2(30) not null,
    SYNOPSIS_OEU varchar2(500) not null,
    DUREE_OEU number(3,0) not null,
    CLASSEMENT_OEU varchar2(10) not null,
    COMPAGNIE_OEU varchar2(30) not null,
    constraint PK_OEUVRE primary key (NO_OEUVRE)
);

create table TP2_REALISATEUR (
    NO_REALISATEUR number(6,0) generated by default as identity(start with 1 increment by 1) not null,
    PRENOM_REA varchar2(30) not null,
    NOM_REA varchar2(30) not null,
    constraint PK_REALISATEUR primary key (NO_REALISATEUR)
);

create table TP2_REALISATEUR_OEUVRE (
    NO_OEUVRE number(6,0) not null,
    NO_REALISATEUR number(6,0) not null, 
    constraint PK_RO_OEU_REA primary key( NO_OEUVRE, NO_REALISATEUR)
);

create table TP2_ACTEUR (
    NO_ACTEUR number(6,0) generated by default as identity(start with 1 increment by 1) not null,
    NOM_ACT varchar2(30) not null,
    PRENOM_ACT varchar2(30) not null,
    DATE_NAISSANCE_ACT date not null,
    COURRIEL_ACT varchar2(30) not null,
    constraint PK_ACTEUR primary key (NO_ACTEUR) 
);

create table TP2_ROLE_OEUVRE (
    NO_OEUVRE number(6,0) not null,
    PERSONNAGE varchar2(50) not null,
    NO_ACTEUR number(6,0) not null,
    constraint PK_ROLE_OEUVRE primary key (NO_OEUVRE, PERSONNAGE)
);

create table TP2_UTILISATEUR (
    LOGIN_UTILISATEUR varchar2(10)not null, /*A VERIFIER*/
    NOM_UTI varchar2(30) not null,
    PRENOM_UTI varchar2(30) not null,
    COURRIEL_UTI varchar2(30) not null,
    DATE_NAISSANCE_UTI date not null,
    MOT_DE_PASSE_UTI varchar2(12) not null, /*A verifier*/
    TYPE_UTI varchar2(30) default 'Utilisateur' not null,
    constraint PK_UTILISATEUR primary key (LOGIN_UTILISATEUR),
    constraint AK_COURRIEL_UTI unique (COURRIEL_UTI)
);

create table TP2_CRITIQUE(
    NO_CRITIQUE number(6,0) not null,
    NO_OEUVRE number(6,0) not null,
    SURNOM_MEMBRE varchar2(10) not null, 
    DATE_CRI date default sysdate not null,
    COTE_CRI number(3,1) null, 
    COMMENTAIRE_CRI VARCHAR2(500) default ' ' not null,
    REPOND_A_NO_CRITIQUE NUMBER(6,0) null,
    constraint PK_CRITIQUE primary key(NO_CRITIQUE),
    constraint AK_CRITIQUE unique (NO_OEUVRE, SURNOM_MEMBRE, DATE_CRI)
);

alter table TP2_HORAIRE_PLATEFORME
    add (constraint FK_PLA_NOM_PLATEFORME foreign key (NOM_PLATEFORME) references TP2_PLATEFORME(NOM_PLATEFORME),
    constraint FK_PLA_NO_OEUVRE foreign key (NO_OEUVRE) references TP2_OEUVRE(NO_OEUVRE));
    
alter table TP2_HORAIRE_CHAINE
    add (constraint FK_PLA_NOM_CHAINE foreign key (NOM_CHAINE) references TP2_CHAINE(NOM_CHAINE),
    constraint FK_CHA_NO_OEUVRE foreign key (NO_OEUVRE) references TP2_OEUVRE(NO_OEUVRE));
    
alter table TP2_HORAIRE_CINEMA
    add (constraint FK_HC_NOM_CINEMA foreign key (NOM_CINEMA) references TP2_CINEMA(NOM_CINEMA),
    constraint FK_HC_NO_OEUVRE foreign key (NO_OEUVRE) references TP2_OEUVRE(NO_OEUVRE));
    
alter table TP2_BILLET_CINEMA
    add constraint FK_BIL_NOM_CINEMA foreign key (NOM_CINEMA) references TP2_CINEMA(NOM_CINEMA);

alter table TP2_REALISATEUR_OEUVRE
    add constraint FK_REA_O_NO_OEUVRE foreign key(NO_OEUVRE) references TP2_OEUVRE (NO_OEUVRE);
    
alter table TP2_REALISATEUR_OEUVRE
    add constraint FK_REA_O_NO_REA foreign key (NO_REALISATEUR) references TP2_REALISATEUR (NO_REALISATEUR);
    
alter table TP2_ROLE_OEUVRE
    add constraint FK_ROL_NO_OEUVRE foreign key (NO_OEUVRE) references TP2_OEUVRE (NO_OEUVRE);
    
alter table TP2_ROLE_OEUVRE
    add constraint FK_RO_NO_ACTEUR foreign key (NO_ACTEUR) references TP2_ACTEUR (NO_ACTEUR);

alter table TP2_CRITIQUE 
    add constraint FK_CRI_NO_OEUVRE foreign key (NO_OEUVRE) references TP2_OEUVRE(NO_OEUVRE);

alter table TP2_CRITIQUE 
    add constraint FK_CRI_REPOND_A foreign key (REPOND_A_NO_CRITIQUE) references TP2_CRITIQUE(NO_CRITIQUE);
alter table TP2_CRITIQUE 
    add constraint FK_CRI_SURNOM_MEM foreign key (SURNOM_MEMBRE) references TP2_UTILISATEUR(LOGIN_UTILISATEUR);
    
alter table TP2_OEUVRE
    add CHEMIN_IMAGE_OEUVRE varchar2(100);
    
create sequence NO_CRITIQUE_SEQ
    start with 5 
    increment by 5 ;
    
create or replace view TP2_VUE_MEMBRE (SURNOM_MEMBRE, NOM_MEM, PRENOM_MEM, COURRIEL_MEM, DATE_NAISSANCE_MEM, MOT_DE_PASSE_MEM) as
    select LOGIN_UTILISATEUR, NOM_UTI, PRENOM_UTI, COURRIEL_UTI, DATE_NAISSANCE_UTI, MOT_DE_PASSE_UTI
        from TP2_UTILISATEUR
            where TYPE_UTI = 'Membre';
            
create or replace view TP2_VUE_EMPLOYE (LOGIN_EMPLOYE, PRENOM_EMP, NOM_EMP, COURRIEL_EMP, MOT_DE_PASSE_EMP) as
    select LOGIN_UTILISATEUR, PRENOM_UTI, NOM_UTI, COURRIEL_UTI, MOT_DE_PASSE_UTI
        from TP2_UTILISATEUR
            where TYPE_UTI = 'Employé';

/*Insertions dans TP2_OEUVRE : */
insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Titanic',1997,'romance',
        'Southampton, 10 avril 1912. Le paquebot le plus grand et le plus moderne du monde, réputé pour son insubmersibilité, 
        le "Titanic", appareille pour son premier voyage. Quatre jours plus tard, il heurte un iceberg. 
        A son bord, un artiste pauvre et une grande bourgeoise tombent amoureux.',188,'G','Paramount Pictures','films/titanic.jpg');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Joker',2019,'drame',
        'Le film, qui relate une histoire originale inédite sur grand écran, se focalise sur la figure emblématique de 
        l''ennemi juré de Batman. Il brosse le portrait d''Arthur Fleck, un homme sans concession méprisé par la société. ',
        122,'12+','DC FIlms','films/joker.jpg');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Avatar',2009,'science-fiction',
        'Malgré sa paralysie, Jake Sully, un ancien marine immobilisé dans un fauteuil roulant, est resté un combattant au 
        plus profond de son être. Il est recruté pour se rendre à des années-lumière de la Terre, sur Pandora, où de puissants 
        groupes industriels exploitent un minerai rarissime destiné à résoudre la crise énergétique sur Terre.',
        162,'G','20th Century Fox','films/avatar.jpg');

        
insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Arnaque américaine',2013,'policier',
        'Un escroc particulièrement brillant, Irving Rosenfeld, et 
        sa belle complice, Sydney Prosser, se retrouvent obligés par un agent du FBI, Richie DiMaso, de nager dans les eaux 
        troubles de la mafia et du pouvoir pour piéger un homme politique corrompu, Carmine Polito. Le piège est risqué, 
        d''autant que l''imprévisible épouse d''Irving, Rosalyn, pourrait bien tous les conduire à leur perte...',
        138,'G','Annapurna Pictures','films/americanbluff.jpg');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Le Bon Côté des Choses',2012,'drame',
        'Diagnostiqué bipolaire, Pat Solitano a tout perdu : sa maison, son travail d''enseignant et sa femme Nikki. 
        Lorsqu''il sort de l''hôpital, il n''a d''autre choix que de retourner vivre chez ses parents. Pat est résolu à 
        reprendre ses affaires en main et à ne voir que le bon côté des choses. Il mène la vie dure à sa mère, qu''il adore, 
        et à son père, un amateur de football qui verse dans les paris clandestins.',
        122,'G','Mirage Enterprises','films/leboncote.jpg');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Joy',2015,'biopic',
        'Inspiré d''une histoire vraie, JOY décrit le fascinant et émouvant parcours, sur 40 ans, d''une femme farouchement 
        déterminée à réussir, en dépit de son excentrique et dysfonctionnelle famille, et à fonder un empire d''un milliard 
        de dollars. Au-delà de la femme d''exception, Joy incarne le rêve américain dans cette comédie dramatique, mêlant 
        portrait de famille, trahisons, déraison et sentiments.',
        124,'G','Davis Entertainment','films/joy.jpg');
        
insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Rapides et dangereux',2001,'action',
        'La nuit tombée, Dominic Toretto règne sur les rues de Los Angeles à la tête d''une équipe de fidèles qui partagent 
        son goût du risque, sa passion de la vitesse et son culte des voitures de sport lancées à plus de 250 km/h dans des 
        rodéos urbains d''une rare violence.',
        107,'G','Universal Pictures','films/red1');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Rapides et dangereux 2',2003,'action',
        'Deux coureurs automobiles casse-cou sont recrutés par le FBI pour infiltrer l''entourage d''un dangereux criminel.',
        107,'G','Universal Pictures','films/red2');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Rapides et dangereux 3',2006,'action',
        'Sean Boswell est un risque-tout à qui sa passion immodérée des voitures de sport trafiquées a déjà attiré de 
        sérieux ennuis avec la police californienne.',
        104,'G','Universal Pictures','films/red3');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Harry Potter à l''école des sorciers ',1997,'fantastique',
        'Le jour de ses onze ans, Harry Potter, un orphelin élevé par un oncle et une tante qui le détestent, 
        voit son existence bouleversée. Un géant nommé Hagrid,vient le chercher pour l''emmener à Poudlard, une école de 
        sorcellerie !',
        152,'G','Warner Bros','films/hp1');       

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Harry Potter et la chambre des secrets',2002,'fantastique',
        'L''elfe de maison Dobby s''est infiltré dans la chambre de Harry ; il avait volé tout son courrier. Dobby est 
        impressionné par Harry, mais fait beaucoup de bruit à chaque qu''il estime qu''il doit se punir. Il prévient 
        Harry qu''un complot se prépare à Poudlard et cherche à lui faire promettre de ne pas retourner à l''école.',
        161,'G','Warner Bros','films/hp2'); 

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Harry Potter et le Prisonnier d''Azkaban',2004,'fantastique','Au début de sa troisième année à l''école de sorcellerie de 
    Poudlard, Harry Potter apprend que Sirius Black, 
    enfermé à la prison d''Azkaban depuis 12 ans, a réussi à s''évader et chercherait maintenant à le tuer. Il appert que 
    Black était un allié du diabolique Voldemort, le meurtrier des parents de Harry.',
        142,'G','Warner Bros','films/hp3');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Harry Potter et la Coupe de feu',2005,'fantastique','La quatrième année à l''école de Poudlard est marquée par le 
    Tournoi des trois sorciers. Les participants sont choisis par la fameuse coupe de feu qui est à l''origine d''un scandale. 
    Elle sélectionne Harry Potter alors qu''il n''a pas l''âge légal requis !',
        157,'G','Warner Bros','films/hp4');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Harry Potter et l''Ordre du Phénix',2007,'fantastique','Alors qu''il entame sa cinquième année d''études à 
    Poudlard, Harry Potter découvre que la communauté des sorciers ne semble pas croire au retour de Voldemort, convaincue 
    par une campagne de désinformation orchestrée par le Ministre de la Magie Cornelius Fudge.',
        138,'G','Warner Bros','films/hp5');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Harry Potter et le Prince de sang-mêlé',2009,'fantastique','L''étau démoniaque de Voldemort se resserre sur 
    l''univers des ''Moldus'' et le monde de la sorcellerie. Poudlard a cessé d''être un havre de paix, le danger rode au coeur 
    du château. Cependant, Dumbledore est plus décidé que jamais à préparer Harry à son combat final, désormais imminent.',
        153,'G','Warner Bros','films/hp6');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Harry Potter et les Reliques de la Mort, partie 1',2010,'fantastique','Le dénouement des aventures du jeune 
    sorcier, commencées sept éditions plus tôt, approche. Plus terrifiant et puissant que jamais, Voldemort, accompagné de 
    ses fidèles servants, les Mangemorts, contrôle quasiment l''ensemble du monde des sorciers. Pour le vaincre, Harry, Ron et 
    Hermione n''ont d''autre choix que de détruire les Horcruxes, garants de l''immortalité du Seigneur des Ténèbres. Seulement, 
    leur mission n''est pas sans risques.',
        146,'G','Warner Bros','films/hp71');

insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Harry Potter et les Reliques de la Mort, partie 2',2011,'fantastique','Le combat entre les puissances du bien et du mal de l''univers des sorciers se transforme en guerre sans merci. 
    Les enjeux n''ont jamais été si considérables et personne n''est en sécurité. Mais c''est Harry Potter qui peut être appelé 
    pour l''ultime sacrifice alors que se rapproche l''ultime épreuve de force avec Voldemort.',
        130,'G','Warner Bros','films/hp72');
        
insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Hunger games',2012,'science-fiction','Après que sa soeur a été sélectionnée pour participer aux violents 
    ''Hunger Games'','' Katniss Everdeen décide de se porter volontaire pour libérer sa soeur de son fardeau. La jeune 
    femme et son comparse du District 12, Peeta, devront affronter 22 autres adolescents ayant entre 12 et 18 ans, jusqu''à 
    la mort.',142,'G','Lions Gate Film','films/hg1');
    
insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Hunger Games : L''Embrasement',2013,'science-fiction','Vainqueurs de la 74e édition des Hunger Games, 
    Katniss Everdeen et son partenaire, Peeta Mellark, habitent maintenant dans le village des gagnants du district 12, 
    non loin de leurs proches. Ils doivent toutefois s''en éloigner pour participer à la Tournée de la victoire. Le président 
    Snow, qui ne veut pas que Katniss devienne un symbole de la rébellion, exige qu''ils laissent croire à tous les 
    téléspectateurs de Panem qu''ils sont toujours amoureux.',146,'G','Color Force','films/hg2');
    
insert into TP2_OEUVRE( TITRE_OEU, ANNEE_OEU, GENRE_OEU, SYNOPSIS_OEU, DUREE_OEU, CLASSEMENT_OEU, COMPAGNIE_OEU,CHEMIN_IMAGE_OEUVRE) 
    values ('Hunger Games : La Révolte, partie 1',2014,'science-fiction','Katniss Everdeen s''est réfugiée dans le District 13 
    après avoir détruit à jamais l''arène et les Jeux. Sous le commandement de la présidente Coin, chef du district, et suivant 
    les conseils de ses amis en qui elle a toute confiance, Katniss déploie ses ailes pour devenir le symbole de la rébellion. 
    Elle va se battre pour sauver Peeta et libérer le pays tout entier, à qui son courage a redonné espoir.',123,'G','Lions Gate Film',
    'films/hg31');
    
/*Insertions dans TP2_REALISATEUR : */
insert into TP2_REALISATEUR (NOM_REA, PRENOM_REA)
    values ('Cameron','James');
    
insert into TP2_REALISATEUR (NOM_REA, PRENOM_REA)
    values ('Phillips','Todd');
    
/*Insertions dans TP2_REALISATEUR_OEUVRE : */
insert into TP2_REALISATEUR_OEUVRE 
    values(1,1);
    
insert into TP2_REALISATEUR_OEUVRE 
    values(2,2);

/*Insertions dans TP2_PLATEFORNE : */
insert into TP2_PLATEFORME(NOM_PLATEFORME, COMPAGNIE_PLA, URL_PLA)
    values('Netflix', 'Netflix', 'http://www.netflix.com');
    
insert into TP2_PLATEFORME(NOM_PLATEFORME, COMPAGNIE_PLA, URL_PLA)
    values('HBO', 'HBO Go', 'http://www.hbo.com');
    
insert into TP2_PLATEFORME(NOM_PLATEFORME, COMPAGNIE_PLA, URL_PLA)
    values('Amazon Prime', 'Amazon', 'http://www.primevideo.com');

/*Insertions dans TP2_HORAIRE_PLATEFORNE : */    
insert into TP2_HORAIRE_PLATEFORME(NOM_PLATEFORME, NO_OEUVRE, DATE_HEURE_HORP)
    values('Netflix', 1, to_date('2018-05-22 19:30', 'YYYY-MM-DD HH24:MI'));
    
insert into TP2_HORAIRE_PLATEFORME(NOM_PLATEFORME, NO_OEUVRE, DATE_HEURE_HORP)
    values('HBO', 2, to_date('2020-03-13 12:30', 'YYYY-MM-DD HH24:MI'));

/*Insertions dans TP2_CHAINE : */    
insert into TP2_CHAINE(NOM_CHAINE, COMPAGNIE_CHA, URL_CHA)
    values('TVA', 'Groupe TVA', 'http://www.tva.ca');
    
insert into TP2_CHAINE(NOM_CHAINE, COMPAGNIE_CHA, URL_CHA)
    values('VRAK', 'Bell Media', 'http://www.vrak.tv');

insert into TP2_CHAINE(NOM_CHAINE, COMPAGNIE_CHA, URL_CHA)
    values('Série Plus', 'Corus Entertainment', 'http://www.serieplus.com');

/*Insertions dans TP2_HORAIRE_CHAINE : */     
insert into TP2_HORAIRE_CHAINE(NOM_CHAINE, NO_OEUVRE, DATE_HEURE_HORCH)
    values('TVA', 1, to_date('2018-05-17 12:30', 'YYYY-MM-DD HH24:MI'));
    
insert into TP2_HORAIRE_CHAINE(NOM_CHAINE, NO_OEUVRE, DATE_HEURE_HORCH)
    values('VRAK', 2, to_date('2020-06-17 18:45', 'YYYY-MM-DD HH24:MI'));

insert into TP2_HORAIRE_CHAINE(NOM_CHAINE, NO_OEUVRE, DATE_HEURE_HORCH)
    values('TVA', 3, to_date('2019-12-12 12:30', 'YYYY-MM-DD HH24:MI'));
    
insert into TP2_HORAIRE_CHAINE(NOM_CHAINE, NO_OEUVRE, DATE_HEURE_HORCH)
    values('VRAK', 3, to_date('2017-07-30 18:45', 'YYYY-MM-DD HH24:MI'));

/*Insertions dans TP2_CINEMA : */ 
insert into TP2_CINEMA(NOM_CINEMA, COMPAGNIE_CIN, ADR_CIN, VILLE_CIN, TELEPHONE_CIN)
    values('Cineplex Odeon Beauport', 'Cineplex', '825 Rue Clémenceau', 'Québec', '(418)661-9494');
    
insert into TP2_CINEMA(NOM_CINEMA, COMPAGNIE_CIN, ADR_CIN, VILLE_CIN, TELEPHONE_CIN)
    values('Cineplex Laval', 'Cineplex', '2800 Ave du Cosmodôme', 'Laval', '(450)978-0212');

insert into TP2_CINEMA(NOM_CINEMA, COMPAGNIE_CIN, ADR_CIN, VILLE_CIN, TELEPHONE_CIN)
    values('Le Clap Place Ste-Foy', 'Le Clap', 'Derrière Place, 2580 Boulevard Laurier', 'Québec', '(450)653-2470');

/*Insertions dans TP2_HORAIRE_CINEMA : */    
insert into TP2_HORAIRE_CINEMA(NOM_CINEMA, NO_OEUVRE, DATE_DEBUT_HORC, HEURE_HORC, DATE_FIN_HORC)
    values('Cineplex Odeon Beauport', 1, to_date('2020-01-17', 'YYYY-MM-DD'), to_date('11:30', 'HH24:MI'), to_date('2020-03-02', 'YYYY-MM-DD'));
    
insert into TP2_HORAIRE_CINEMA(NOM_CINEMA, NO_OEUVRE, DATE_DEBUT_HORC, HEURE_HORC, DATE_FIN_HORC)
    values('Cineplex Laval', 2, to_date('2020-02-18', 'YYYY-MM-DD'), to_date('14:30', 'HH24:MI'), to_date('2020-04-08', 'YYYY-MM-DD'));
    
/*Insertions dans TP2_BILLET_CINEMA : */
insert into TP2_BILLET_CINEMA(NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL, MNT_PRIX_BIL)
    values('Cineplex Odeon Beauport', 'Adulte', 'Après-midi', 11.99);

insert into TP2_BILLET_CINEMA(NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL, MNT_PRIX_BIL)
    values('Cineplex Odeon Beauport', 'Adulte', 'Soir', 12.99);

insert into TP2_BILLET_CINEMA(NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL, MNT_PRIX_BIL)
    values('Cineplex Odeon Beauport', 'Étudiant', 'Soir', 5.99);
    
insert into TP2_BILLET_CINEMA(NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL, MNT_PRIX_BIL)
    values('Cineplex Laval', 'Enfant', 'Avant-midi', 9.99);

insert into TP2_BILLET_CINEMA(NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL, MNT_PRIX_BIL)
    values('Cineplex Laval', 'Adulte', 'Avant-midi', 11.99);

insert into TP2_BILLET_CINEMA(NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL, MNT_PRIX_BIL)
    values('Le Clap Place Ste-Foy', 'Adulte', 'Soir', 11.50);

insert into TP2_BILLET_CINEMA(NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL, MNT_PRIX_BIL)
    values('Le Clap Place Ste-Foy', 'Étudiant', 'Soir', 9.25);

insert into TP2_BILLET_CINEMA(NOM_CINEMA, CATEGORIE_BIL, PERIODE_JOURNEE_BIL, MNT_PRIX_BIL)
    values('Le Clap Place Ste-Foy', 'Enfant', 'Soir', 8.50);
    
/*Insertions dans TP2_ACTEUR : */
insert into TP2_ACTEUR (NOM_ACT, PRENOM_ACT,DATE_NAISSANCE_ACT, COURRIEL_ACT)
    values ('DiCaprio','Leonardo',to_date('74-11-11','YY-MM-DD'), 'LeoDiCaprio74@gmail.com');

insert into TP2_ACTEUR (NOM_ACT, PRENOM_ACT,DATE_NAISSANCE_ACT, COURRIEL_ACT)
    values ('Phoenix','Joaquin',to_date('74-10-28','YY-MM-DD'), 'PhoenixJoaquin74@hotmail.com');

/*Insertions dans TP2_ROLE_OEUVRE : */
insert into TP2_ROLE_OEUVRE (NO_OEUVRE, PERSONNAGE, NO_ACTEUR)
    values (1,'Jack Dawson',1);
    
insert into TP2_ROLE_OEUVRE (NO_OEUVRE, PERSONNAGE, NO_ACTEUR)
    values (2,'Arthur Fleck / Le Joker',2);

/*Insertions dans TP2_UTILISATEUR : */
insert into TP2_UTILISATEUR (LOGIN_UTILISATEUR, NOM_UTI, PRENOM_UTI, COURRIEL_UTI,DATE_NAISSANCE_UTI,MOT_DE_PASSE_UTI,TYPE_UTI)
    values ('MovieLover','Doe','Jane','janedoe@gmail.com',to_date('80-8-6','YY-MM-DD'),'motdepass','Membre');
    
insert into TP2_UTILISATEUR (LOGIN_UTILISATEUR, NOM_UTI, PRENOM_UTI, COURRIEL_UTI,DATE_NAISSANCE_UTI,MOT_DE_PASSE_UTI,TYPE_UTI)
    values ('KenKen','Plastic','Ken','kenken@gmail.com',to_date('98-03-21','YY-MM-DD'),'jaimebarbie','Membre');

insert into TP2_UTILISATEUR (LOGIN_UTILISATEUR, NOM_UTI, PRENOM_UTI, COURRIEL_UTI,DATE_NAISSANCE_UTI,MOT_DE_PASSE_UTI,TYPE_UTI)
    values ('BarbieDoll','Doll','Barbie','barbie@gmail.com',to_date('99-8-8','YY-MM-DD'),'jaimeKen','Membre');

insert into TP2_UTILISATEUR (LOGIN_UTILISATEUR, NOM_UTI, PRENOM_UTI, COURRIEL_UTI,DATE_NAISSANCE_UTI,MOT_DE_PASSE_UTI,TYPE_UTI)
    values ('MrNet','Net','Monsieur','effaceurmagique@yahoo.com',to_date('1958-8-24','YY-MM-DD'),'proprete101','Membre');

insert into TP2_UTILISATEUR (LOGIN_UTILISATEUR, NOM_UTI, PRENOM_UTI, COURRIEL_UTI,DATE_NAISSANCE_UTI,MOT_DE_PASSE_UTI,TYPE_UTI)
    values ('BobMod','Tremblay','Bob','bobmoderateur@quebingeton.com',to_date('90-03-03','YY-MM-DD'),'fG54pot*','Employé');  

insert into TP2_UTILISATEUR (LOGIN_UTILISATEUR, NOM_UTI, PRENOM_UTI, COURRIEL_UTI,DATE_NAISSANCE_UTI,MOT_DE_PASSE_UTI,TYPE_UTI)
    values ('EllenEmp','Packet','Elle','ellen.employe@quebingeton.com',to_date('97-12-12','YY-MM-DD'),'vuowr23*','Employé');  

insert into TP2_UTILISATEUR (LOGIN_UTILISATEUR, NOM_UTI, PRENOM_UTI, COURRIEL_UTI,DATE_NAISSANCE_UTI,MOT_DE_PASSE_UTI,TYPE_UTI)
    values ('KarenEmp','Gagnon','Karen','karen.employe@quebingeton.com',to_date('70-12-24','YY-MM-DD'),'kaR32n23*','Employé'); 
    
/*Insertions dans TP2_CRITIQUE : */
insert into TP2_CRITIQUE(NO_CRITIQUE,NO_OEUVRE,SURNOM_MEMBRE,DATE_CRI,COTE_CRI,COMMENTAIRE_CRI) 
    values (NO_CRITIQUE_SEQ.nextval,1, 'MovieLover',to_date('20-01-03','YY-MM-DD'),10.0,'C''est trop triste...');

insert into TP2_CRITIQUE(NO_CRITIQUE,NO_OEUVRE,SURNOM_MEMBRE,COTE_CRI,COMMENTAIRE_CRI,REPOND_A_NO_CRITIQUE) 
    values (NO_CRITIQUE_SEQ.nextval,1, 'BobMod',null,'C''est vrai!!',5);
    
insert into TP2_CRITIQUE(NO_CRITIQUE,NO_OEUVRE,SURNOM_MEMBRE,DATE_CRI,COTE_CRI,COMMENTAIRE_CRI) 
    values (NO_CRITIQUE_SEQ.nextval,1, 'KenKen',to_date('20-01-03','YY-MM-DD'),5,'Fuck j''aime pas les drames');

insert into TP2_CRITIQUE(NO_CRITIQUE,NO_OEUVRE,SURNOM_MEMBRE,COTE_CRI,COMMENTAIRE_CRI) 
    values (NO_CRITIQUE_SEQ.nextval,1, 'BarbieDoll',8,'j''aime');
    
insert into TP2_CRITIQUE(NO_CRITIQUE,NO_OEUVRE,SURNOM_MEMBRE,COTE_CRI,REPOND_A_NO_CRITIQUE) 
    values (NO_CRITIQUE_SEQ.nextval,1, 'KenKen',null,10);
    
create or replace procedure SP_PURGER_HORAIRE(P_I_DATE date) 
is
begin
    delete from TP2_HORAIRE_CHAINE
        where DATE_HEURE_HORCH < P_I_DATE;
    delete from TP2_HORAIRE_CINEMA
        where DATE_DEBUT_HORC < P_I_DATE;
    delete from TP2_HORAIRE_PLATEFORME
        where DATE_HEURE_HORP < P_I_DATE;
end SP_PURGER_HORAIRE;
/



create or replace procedure TP3_SP_PURGER_HORAIRE is 
    V_DATE date := sysdate - 182;
begin

    delete from TP2_HORAIRE_CHAINE
        where DATE_HEURE_HORCH < V_DATE;
    delete from TP2_HORAIRE_CINEMA
        where DATE_DEBUT_HORC < V_DATE;
    delete from TP2_HORAIRE_PLATEFORME
        where DATE_HEURE_HORP < V_DATE;
end TP3_SP_PURGER_HORAIRE;
/
execute TP3_SP_PURGER_HORAIRE;
